(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery-ui","d3","JSRootPainter","THREE","three.extra","THREE_ALL","JSRootPainter.jquery"],a)}else{if(typeof JSROOT=="undefined"){throw new Error("JSROOT is not defined","JSRoot3DPainter.js")}if(typeof d3!="object"){throw new Error("This extension requires d3.v3.js","JSRoot3DPainter.js")}if(typeof JSROOT.Painter!="object"){throw new Error("JSROOT.Painter is not defined","JSRoot3DPainter.js")}if(typeof THREE=="undefined"){throw new Error("THREE is not defined","JSRoot3DPainter.js")}a(jQuery,jQuery.ui,d3,JSROOT)}}(function(c,d,b,a){a.Painter.add3DInteraction=function(m,h,l,r,p){var g,f,i=false;var k={x:0,y:0},o;var s=function(){var v="tt";var G=3;var x=3;var F=150;var y=10;var w=20;var B=95;var z=0;var C,H,D,E,A;var u=document.all?true:false;return{show:function(I,t){if(C==null){C=document.createElement("div");C.setAttribute("id",v);H=document.createElement("div");H.setAttribute("id",v+"top");D=document.createElement("div");D.setAttribute("id",v+"cont");E=document.createElement("div");E.setAttribute("id",v+"bot");C.appendChild(H);C.appendChild(D);C.appendChild(E);document.body.appendChild(C);C.style.opacity=0;C.style.filter="alpha(opacity=0)";document.onmousemove=this.pos}C.style.display="block";D.innerHTML=I;C.style.width=t?t+"px":"auto";C.style.width="auto";if(!t&&u){H.style.display="none";E.style.display="none";C.style.width=C.offsetWidth;H.style.display="block";E.style.display="block"}A=parseInt(C.offsetHeight)+G;clearInterval(C.timer);C.timer=setInterval(function(){s.fade(1)},w)},pos:function(J){var I=u?event.clientY+document.documentElement.scrollTop:J.pageY;var t=u?event.clientX+document.documentElement.scrollLeft:J.pageX;C.style.top=I+15+"px";C.style.left=(t+x)+"px"},fade:function(J){var t=z;if((t!=B&&J==1)||(t!=0&&J==-1)){var I=y;if(B-t<y&&J==1){I=B-t}else{if(z<y&&J==-1){I=t}}z=t+(I*J);C.style.opacity=z*0.01;C.style.filter="alpha(opacity="+z+")"}else{clearInterval(C.timer);if(J==-1){C.style.display="none"}}},hide:function(){if(C==null){return}clearInterval(C.timer);C.timer=setInterval(function(){s.fade(-1)},w)}}}();var j=100;var e=0;var n=new THREE.Raycaster();function q(){if(i){if(o){o.material.emissive.setHex(o.currentHex);m.render(h,l)}o=null;if(a.gStyle.Tooltip){s.hide()}return}n.setFromCamera(k,l);var v=n.intersectObjects(h.children,true);if(v.length>0){var u=null;for(var t=0;t<v.length;++t){if("emissive" in v[t].object.material){u=v[t];break}}if(u&&o!=u.object){if(o){o.material.emissive.setHex(o.currentHex)}o=u.object;o.currentHex=o.material.emissive.getHex();o.material.emissive.setHex(6250335);m.render(h,l);if(a.gStyle.Tooltip){s.show(o.name.length>0?o.name:o.parent.name,200)}}}else{if(o){o.material.emissive.setHex(o.currentHex);m.render(h,l)}o=null;if(a.gStyle.Tooltip){s.hide()}}}c(m.domElement).on("touchstart mousedown",function(t){if(a.gStyle.Tooltip){s.hide()}t.preventDefault();var u=t;if("changedTouches" in t){u=t.changedTouches[0]}else{if("touches" in t){u=t.touches[0]}else{if("originalEvent" in t){if("changedTouches" in t.originalEvent){u=t.originalEvent.changedTouches[0]}else{if("touches" in t.originalEvent){u=t.originalEvent.touches[0]}}}}}g=u.pageX;f=u.pageY;i=true});c(m.domElement).on("touchmove mousemove",function(x){if(i){var y=x;if("changedTouches" in x){y=x.changedTouches[0]}else{if("touches" in x){y=x.touches[0]}else{if("originalEvent" in x){if("changedTouches" in x.originalEvent){y=x.originalEvent.changedTouches[0]}else{if("touches" in x.originalEvent){y=x.originalEvent.touches[0]}}}}}var w=y.pageX-g;var v=y.pageY-f;if((v>0&&r.rotation.x<Math.PI*3/4)||(v<0&&r.rotation.x>-Math.PI/4)){r.rotation.x+=v*0.02}r.rotation.y+=w*0.02;m.render(h,l);g=y.pageX;f=y.pageY}else{x.preventDefault();var u="offsetX" in x.originalEvent?x.originalEvent.offsetX:x.originalEvent.layerX;var t="offsetY" in x.originalEvent?x.originalEvent.offsetY:x.originalEvent.layerY;k.x=(u/m.domElement.width)*2-1;k.y=-(t/m.domElement.height)*2+1;q()}});c(m.domElement).on("touchend mouseup",function(t){i=false});c(m.domElement).on("mousewheel",function(t,u){t.preventDefault();l.position.z+=u*20;m.render(h,l)});c(m.domElement).on("contextmenu",function(t){t.preventDefault();if(a.gStyle.Tooltip){s.hide()}a.Painter.createMenu(function(u){if(p){u.add("header:"+p.histo.fName)}u.add(a.gStyle.Tooltip?"Disable tooltip":"Enable tooltip",function(){a.gStyle.Tooltip=!a.gStyle.Tooltip;s.hide()});if(p){u.add("Switch to 2D",function(){c(p.svg_pad().node()).show().parent().find(m.domElement).remove();s.hide();p.Draw2D()})}u.add("Close");u.show(t.originalEvent)})})};a.Painter.real_drawHistogram2D=function(o,N){var af=o.pad_width(),ap=o.pad_height(),q=100;var s=o.xmin,ad=o.xmax;if(o.zoom_xmin!=o.zoom_xmax){s=o.zoom_xmin;ad=o.zoom_xmax}var W=o.ymin,m=o.ymax;if(o.zoom_ymin!=o.zoom_ymax){W=o.zoom_ymin;m=o.zoom_ymax}var an,H,al,G,aj,E;if(o.options.Logx){an=b.scale.log().domain([s,ad]).range([-q,q]);H=b.scale.log().domain([-q,q]).range([s,ad])}else{an=b.scale.linear().domain([s,ad]).range([-q,q]);H=b.scale.linear().domain([-q,q]).range([s,ad])}if(o.options.Logy){al=b.scale.log().domain([W,m]).range([-q,q]);G=b.scale.log().domain([q,-q]).range([W,m])}else{al=b.scale.linear().domain([W,m]).range([-q,q]);G=b.scale.linear().domain([q,-q]).range([W,m])}if(o.options.Logz){aj=b.scale.log().domain([o.gminbin,Math.ceil(o.gmaxbin/100)*105]).range([0,q*2]);E=b.scale.log().domain([0,q*2]).range([o.gminbin,Math.ceil(o.gmaxbin/100)*105])}else{aj=b.scale.linear().domain([o.gminbin,Math.ceil(o.gmaxbin/100)*105]).range([0,q*2]);E=b.scale.linear().domain([0,q*2]).range([o.gminbin,Math.ceil(o.gmaxbin/100)*105])}var R=(q*2/o.nbinsx)/o.gmaxbin;var Q=(q*2/o.nbinsy)/o.gmaxbin;var aa=(o.options.Color>0);var r=b.rgb(a.Painter.root_colors[o.histo.fFillColor]);var O=o.CreateDrawBins(100,100,2,(a.gStyle.Tooltip?1:0));var S=new THREE.Scene();var D=new THREE.Object3D();D.rotation.x=30*Math.PI/180;D.rotation.y=30*Math.PI/180;S.add(D);var e=new THREE.MeshBasicMaterial({color:0,wireframe:true,wireframeLinewidth:0.5,side:THREE.DoubleSide});var f=new THREE.Mesh(new THREE.BoxGeometry(q*2,q*2,q*2),e);var x=new THREE.BoxHelper(f);x.material.color.set(0);var p=new THREE.Object3D();p.add(x);p.position.y=q;D.add(p);var C=new THREE.MeshBasicMaterial({color:0});var z=new THREE.LineBasicMaterial({color:0});var F;var ag=new Array();var U,aq,M=3,J,K=Math.sin(45);var I,T;var B=an.ticks(8);var ac=an.ticks(50);for(var ao=-q,am=0,ak=0;ao<q;++ao){var ai=(H(ao)<=B[am]&&H(ao+1)>B[am])?true:false;var X=(H(ao)<=ac[ak]&&H(ao+1)>ac[ak])?true:false;J=(ai?M+2:M)*K;if(ai){I=new THREE.TextGeometry(B[am],{size:7,height:0,curveSegments:10});++am;I.computeBoundingBox();var g=0.5*(I.boundingBox.max.x-I.boundingBox.min.x);T=new THREE.Mesh(I,C);T.position.set(ao-g,-13,q+J);D.add(T);T=new THREE.Mesh(I,C);T.position.set(ao+g,-13,-q-J);T.rotation.y=Math.PI;D.add(T)}if(ai||X){++ak;F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(ao,0,q));F.vertices.push(new THREE.Vector3(ao,-J,q+J));D.add(new THREE.Line(F,z));ag.push(F);F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(ao,0,-q));F.vertices.push(new THREE.Vector3(ao,-J,-q-J));D.add(new THREE.Line(F,z));ag.push(F)}}var A=al.ticks(8);var ab=al.ticks(50);for(var ao=q,am=0,ak=0;ao>-q;--ao){var ai=(G(ao)<=A[am]&&G(ao-1)>A[am])?true:false;var X=(G(ao)<=ab[ak]&&G(ao-1)>ab[ak])?true:false;J=(ai?M+2:M)*K;if(ai){I=new THREE.TextGeometry(A[am],{size:7,height:0,curveSegments:10});++am;I.computeBoundingBox();var g=0.5*(I.boundingBox.max.x-I.boundingBox.min.x);T=new THREE.Mesh(I,C);T.position.set(q+J,-13,ao+g);T.rotation.y=Math.PI/2;D.add(T);T=new THREE.Mesh(I,C);T.position.set(-q-J,-13,ao-g);T.rotation.y=-Math.PI/2;D.add(T)}if(ai||X){++ak;F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(q,0,ao));F.vertices.push(new THREE.Vector3(q+J,-J,ao));D.add(new THREE.Line(F,z));ag.push(F);F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(-q,0,ao));F.vertices.push(new THREE.Vector3(-q-J,-J,ao));D.add(new THREE.Line(F,z));ag.push(F)}}var y=aj.ticks(8);var Z=aj.ticks(50);for(var ao=0,am=0,ak=0;ao<(q*2);++ao){var ai=(E(ao)<=y[am]&&E(ao+1)>y[am])?true:false;var X=(E(ao)<=Z[ak]&&E(ao+1)>Z[ak])?true:false;J=(ai?M+2:M)*K;if(ai){I=new THREE.TextGeometry(y[am],{size:7,height:0,curveSegments:10});++am;I.computeBoundingBox();var ae=0.8*(I.boundingBox.max.x-I.boundingBox.min.x);T=new THREE.Mesh(I,C);T.position.set(q+ae+5,ao-2.5,q+ae+5);T.rotation.y=Math.PI*3/4;D.add(T);T=new THREE.Mesh(I,C);T.position.set(q+ae+5,ao-2.5,-q-ae-5);T.rotation.y=-Math.PI*3/4;D.add(T);T=new THREE.Mesh(I,C);T.position.set(-q-ae-5,ao-2.5,q+ae+5);T.rotation.y=Math.PI/4;D.add(T);T=new THREE.Mesh(I,C);T.position.set(-q-ae-5,ao-2.5,-q-ae-5);T.rotation.y=-Math.PI/4;D.add(T)}if(ai||X){++ak;F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(q,ao,q));F.vertices.push(new THREE.Vector3(q+J,ao,q+J));D.add(new THREE.Line(F,z));ag.push(F);F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(q,ao,-q));F.vertices.push(new THREE.Vector3(q+J,ao,-q-J));D.add(new THREE.Line(F,z));ag.push(F);F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(-q,ao,q));F.vertices.push(new THREE.Vector3(-q-J,ao,q+J));D.add(new THREE.Line(F,z));ag.push(F);F=new THREE.Geometry();F.vertices.push(new THREE.Vector3(-q,ao,-q));F.vertices.push(new THREE.Vector3(-q-J,ao,-q-J));D.add(new THREE.Line(F,z));ag.push(F)}}var ah=0;while(ag[ah]){ag[ah].dispose();ah++}var v=new THREE.Color(14540253);v.setRGB(r.r/255,r.g/255,r.b/255);var u,P,n,ar;for(var ao=0;ao<O.length;++ao){ar=O[ao];n=aj(ar.z);u=new THREE.Mesh(new THREE.BoxGeometry(2*q/o.nbinsx,n,2*q/o.nbinsy),new THREE.MeshLambertMaterial({color:v.getHex()}));u.position.x=an(ar.x);u.position.y=n/2;u.position.z=-(al(ar.y));if(a.gStyle.Tooltip){u.name=ar.tip}D.add(u);x=new THREE.BoxHelper(u);x.material.color.set(0);x.material.linewidth=1;D.add(x)}delete O;O=null;var L=new THREE.PerspectiveCamera(45,af/ap,1,4000);var l=new THREE.PointLight(13619151);L.add(l);l.position.set(10,10,10);L.position.set(0,q/2,500);L.lookat=f;S.add(L);var V={canvas:!!window.CanvasRenderingContext2D,webgl:(function(){try{return !!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(h){return false}})(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob};var Y=V.webgl?new THREE.WebGLRenderer({antialias:true}):new THREE.CanvasRenderer({antialias:true});Y.setClearColor(16777215,1);Y.setSize(af,ap);c(o.svg_pad().node()).hide().parent().append(Y.domElement);Y.render(S,L);a.Painter.add3DInteraction(Y,S,L,D,o)};a.Painter.drawHistogram3D=function(ai,m,ao){var aH=false,aG=false,aF=false,M=false,K=false,I=false;this.SetDivId(ai,-1);var s=this.root_pad();var n;if(!this.svg_pad().empty()){n=c(this.svg_pad().node()).hide().parent()}else{n=c("#"+ai)}if(typeof ao=="undefined"||ao==""){ao=m.fOption}ao=ao.toLowerCase();if(s){aH=s.fLogx;aG=s.fLogy;aF=s.fLogz;M=s.fGridx;K=s.fGridy;I=s.fGridz}var ah=a.Painter.root_colors[m.fFillColor];var aE=a.Painter.root_colors[m.fLineColor];if(m.fFillColor==0){ah="#4572A7"}if(m.fLineColor==0){aE="#4572A7"}var am=m.fXaxis["fNbins"];var al=m.fYaxis["fNbins"];var ak=m.fZaxis["fNbins"];var N=(m.fXaxis["fXmax"]-m.fXaxis["fXmin"])/m.fXaxis["fNbins"];var L=(m.fYaxis["fXmax"]-m.fYaxis["fXmin"])/m.fYaxis["fNbins"];var J=(m.fZaxis["fXmax"]-m.fZaxis["fXmin"])/m.fZaxis["fNbins"];var q=-1e+32,H=1e+32;q=b.max(m.fArray);H=b.min(m.fArray);var au=new Array();for(var U=0;U<=am+2;++U){for(var T=0;T<al+2;++T){for(var R=0;R<ak+2;++R){var O=m.getBinContent(U,T,R);if(O>H){var f={x:m.fXaxis["fXmin"]+(U*N),y:m.fYaxis["fXmin"]+(T*L),z:m.fZaxis["fXmin"]+(R*J),n:O};au.push(f)}}}}var D=n.width(),W=n.height(),E=100;if(W<10){n.height(0.66*D);W=n.height()}if(aH){var ac=b.scale.log().domain([m.fXaxis["fXmin"],m.fXaxis["fXmax"]]).range([-E,E]);var ay=b.scale.log().domain([-E,E]).range([m.fXaxis["fXmin"],m.fXaxis["fXmax"]])}else{var ac=b.scale.linear().domain([m.fXaxis["fXmin"],m.fXaxis["fXmax"]]).range([-E,E]);var ay=b.scale.linear().domain([-E,E]).range([m.fXaxis["fXmin"],m.fXaxis["fXmax"]])}if(aG){var ab=b.scale.log().domain([m.fYaxis["fXmin"],m.fYaxis["fXmax"]]).range([-E,E]);var ax=b.scale.log().domain([E,-E]).range([m.fYaxis["fXmin"],m.fYaxis["fXmax"]])}else{var ab=b.scale.linear().domain([m.fYaxis["fXmin"],m.fYaxis["fXmax"]]).range([-E,E]);var ax=b.scale.linear().domain([E,-E]).range([m.fYaxis["fXmin"],m.fYaxis["fXmax"]])}if(aF){var aa=b.scale.log().domain([m.fZaxis["fXmin"],m.fZaxis["fXmax"]]).range([-E,E]);var aw=b.scale.log().domain([-E,E]).range([m.fZaxis["fXmin"],m.fZaxis["fXmax"]])}else{var aa=b.scale.linear().domain([m.fZaxis["fXmin"],m.fZaxis["fXmax"]]).range([-E,E]);var aw=b.scale.linear().domain([-E,E]).range([m.fZaxis["fXmin"],m.fZaxis["fXmax"]])}var C=new THREE.Scene();var P=new THREE.Object3D();P.rotation.x=30*Math.PI/180;P.rotation.y=30*Math.PI/180;C.add(P);var ad=new THREE.MeshBasicMaterial({color:0,wireframe:true,wireframeLinewidth:0.5,side:THREE.DoubleSide});var Y=new THREE.Mesh(new THREE.BoxGeometry(E*2,E*2,E*2),ad);var Z=new THREE.BoxHelper(Y);Z.material.color.set(0);P.add(Z);var V=new THREE.MeshBasicMaterial({color:0});var az=new THREE.LineBasicMaterial({color:0});var an;var at=new Array();var aD,ag,aj=3,ae,aA=Math.sin(45);var ap,ar;var S=ac.ticks(5);var e=ac.ticks(25);for(var U=-E,T=0,R=0;U<=E;++U){var v=(ay(U)<=S[T]&&ay(U+1)>S[T])?true:false;var G=(ay(U)<=e[R]&&ay(U+1)>e[R])?true:false;ae=(v?aj+2:aj)*aA;if(v){ap=new THREE.TextGeometry(S[T],{size:7,height:0,curveSegments:10});++T;ap.computeBoundingBox();var l=0.5*(ap.boundingBox.max.x-ap.boundingBox.min.x);ar=new THREE.Mesh(ap,V);ar.position.set(U-l,-E-13,E+ae);P.add(ar);ar=new THREE.Mesh(ap,V);ar.position.set(U+l,-E-13,-E-ae);ar.rotation.y=Math.PI;P.add(ar)}if(v||G){++R;an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(U,-E,E));an.vertices.push(new THREE.Vector3(U,-E-ae,E+ae));P.add(new THREE.Line(an,az));at.push(an);an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(U,-E,-E));an.vertices.push(new THREE.Vector3(U,-E-ae,-E-ae));P.add(new THREE.Line(an,az));at.push(an)}}var x=ab.ticks(5);var aB=ab.ticks(25);for(var U=E,T=0,R=0;U>-E;--U){var v=(ax(U)<=x[T]&&ax(U-1)>x[T])?true:false;var G=(ax(U)<=aB[R]&&ax(U-1)>aB[R])?true:false;ae=(v?aj+2:aj)*aA;if(v){ap=new THREE.TextGeometry(x[T],{size:7,height:0,curveSegments:10});++T;ap.computeBoundingBox();var l=0.5*(ap.boundingBox.max.x-ap.boundingBox.min.x);ar=new THREE.Mesh(ap,V);ar.position.set(E+ae,-E-13,U+l);ar.rotation.y=Math.PI/2;P.add(ar);ar=new THREE.Mesh(ap,V);ar.position.set(-E-ae,-E-13,U-l);ar.rotation.y=-Math.PI/2;P.add(ar)}if(v||G){++R;an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(E,-E,U));an.vertices.push(new THREE.Vector3(E+ae,-E-ae,U));P.add(new THREE.Line(an,az));at.push(an);an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(-E,-E,U));an.vertices.push(new THREE.Vector3(-E-ae,-E-ae,U));P.add(new THREE.Line(an,az));at.push(an)}}var r=aa.ticks(5);var aq=aa.ticks(25);for(var U=-E,T=0,R=0;U<=E;++U){var v=(aw(U)<=r[T]&&aw(U+1)>r[T])?true:false;var G=(aw(U)<=aq[R]&&aw(U+1)>aq[R])?true:false;ae=(v?aj+2:aj)*aA;if(v){ap=new THREE.TextGeometry(r[T],{size:7,height:0,curveSegments:10});++T;ap.computeBoundingBox();var p=0.6*(ap.boundingBox.max.x-ap.boundingBox.min.x);ar=new THREE.Mesh(ap,V);ar.position.set(E+p+7,U-2.5,E+p+7);ar.rotation.y=Math.PI*3/4;P.add(ar);ar=new THREE.Mesh(ap,V);ar.position.set(E+p+7,U-2.5,-E-p-7);ar.rotation.y=-Math.PI*3/4;P.add(ar);ar=new THREE.Mesh(ap,V);ar.position.set(-E-p-7,U-2.5,E+p+7);ar.rotation.y=Math.PI/4;P.add(ar);ar=new THREE.Mesh(ap,V);ar.position.set(-E-p-7,U-2.5,-E-p-7);ar.rotation.y=-Math.PI/4;P.add(ar)}if(v||G){++R;an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(E,U,E));an.vertices.push(new THREE.Vector3(E+ae,U,E+ae));P.add(new THREE.Line(an,az));at.push(an);an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(E,U,-E));an.vertices.push(new THREE.Vector3(E+ae,U,-E-ae));P.add(new THREE.Line(an,az));at.push(an);an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(-E,U,E));an.vertices.push(new THREE.Vector3(-E-ae,U,E+ae));P.add(new THREE.Line(an,az));at.push(an);an=new THREE.Geometry();an.vertices.push(new THREE.Vector3(-E,U,-E));an.vertices.push(new THREE.Vector3(-E-ae,U,-E-ae));P.add(new THREE.Line(an,az));at.push(an)}}var F=0;while(at[F]){at[F].dispose();F++}var B=(E*2/m.fXaxis["fNbins"])/q;var z=(E*2/m.fYaxis["fNbins"])/q;var y=(E*2/m.fZaxis["fNbins"])/q;var aC=(ao.indexOf("colz")!=-1||ao.indexOf("col")!=-1);var o=b.rgb(a.Painter.root_colors[m.fFillColor]);var ah=new THREE.Color(14540253);ah.setRGB(o.r/255,o.g/255,o.b/255);var u,X,A;for(var U=0;U<au.length;++U){A=(aC?q:au[U].n);if(ao.indexOf("box1")!=-1){u=new THREE.Mesh(new THREE.SphereGeometry(0.5*A*B),new THREE.MeshPhongMaterial({color:ah.getHex(),specular:5197647}))}else{u=new THREE.Mesh(new THREE.BoxGeometry(A*B,A*y,A*z),new THREE.MeshLambertMaterial({color:ah.getHex()}))}u.position.x=ac(au[U].x-(N/2));u.position.y=aa(au[U].z-(J/2));u.position.z=-(ab(au[U].y-(L/2)));u.name="x: ["+au[U].x.toPrecision(4)+", "+(au[U].x+N).toPrecision(4)+"]<br/>y: ["+au[U].y.toPrecision(4)+", "+(au[U].y+L).toPrecision(4)+"]<br/>z: ["+au[U].z.toPrecision(4)+", "+(au[U].z+J).toPrecision(4)+"]<br/>entries: "+au[U].n.toFixed();P.add(u);if(ao.indexOf("box1")==-1){Z=new THREE.BoxHelper(u);Z.material.color.set(0);Z.material.linewidth=1;P.add(Z)}}var av=new THREE.PerspectiveCamera(45,D/W,1,4000);var Q=new THREE.PointLight(15724527);av.add(Q);Q.position.set(10,10,10);av.position.set(0,0,500);av.lookat=Y;C.add(av);var g={canvas:!!window.CanvasRenderingContext2D,webgl:(function(){try{return !!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(h){return false}})(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob};var af=g.webgl?new THREE.WebGLRenderer({antialias:true}):new THREE.CanvasRenderer({antialias:true});af.setClearColor(16777215,1);af.setSize(D,W);n.append(af.domElement);af.render(C,av);a.Painter.add3DInteraction(af,C,av,P,null);return this.DrawingReady()};return a.Painter}));